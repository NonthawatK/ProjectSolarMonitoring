# тЬи Solar Rooftop Temperature Monitoring & Logging System With LAN Communication

## ЁЯУЦ TOC
1. [ЁЯФз р╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣М](#-р╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣М)
2. [тнР р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕лр╕ер╕▒р╕Б](#-р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕лр╕ер╕▒р╕Б)
3. [ЁЯУВ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕гр╕░р╕Ър╕Ър╣Вр╕Фр╕вр╕вр╣Ир╕н](#-р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕гр╕░р╕Ър╕Ър╣Вр╕Фр╕вр╕вр╣Ир╕н)
4. [тЪЩя╕П р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ъ](#-р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ъ)
5. [ЁЯМР р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Web Server](#-р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓-web-server)
6. [ЁЯУб ESP-NOW Sender Mode](#esp-now-sender-mode)
7. [ЁЯТд р╕Бр╕▓р╕гр╣Гр╕Кр╣Й Deep Sleep р╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╕гр╕░р╕лр╕вр╕▒р╕Фр╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щ](#р╕Бр╕▓р╕гр╣Гр╕Кр╣Й-deep-sleep-р╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╕гр╕░р╕лр╕вр╕▒р╕Фр╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щ)
8. [ЁЯТ╛ р╕Бр╕▓р╕гр╣Ар╕Бр╣Зр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕Др╕▒р╕Нр╕ер╕З NVS](#р╕Бр╕▓р╕гр╣Ар╕Бр╣Зр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕Др╕▒р╕Нр╕ер╕З-nvs)

---

## ЁЯФз р╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣М
- ЁЯЯв ESP32 Xiao C3  
- ЁЯМбя╕П HTU21D (Temperature & Humidity Sensor)  
- тП░ DS3231 (Real Time Clock Module)  

---

## тнР р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕лр╕ер╕▒р╕Б
- ЁЯМбя╕П р╕нр╣Ир╕▓р╕Щр╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤р╕Ир╕▓р╕Б HTU21D р╕Ьр╣Ир╕▓р╕Щ I2C  
- тП░ р╕нр╣Ир╕▓р╕Щр╣Ар╕зр╕ер╕▓ DS3231 р╕Ьр╣Ир╕▓р╕Щ I2C  
- ЁЯУб р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╣Ир╕▓р╕Щ ESP-NOW  
- ЁЯМР р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Ар╕зр╕ер╕▓р╣Бр╕ер╕░ MAC р╕Ьр╣Ир╕▓р╕Щ Web Server  
- ЁЯУ╢ р╣Ар╕Ыр╕┤р╕Ф WiFi AP р╣Ар╕бр╕╖р╣Ир╕нр╕Бр╕Фр╕Ыр╕╕р╣Ир╕б  
- ЁЯТ╛ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Др╣Ир╕▓р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓р╣Бр╕ер╕░ MAC р╕ер╕З NVS  

р╣Ар╕лр╕бр╕▓р╕░р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕░р╕Ър╕Ъ IoT, р╕гр╕░р╕Ър╕Ър╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕гр╣Йр╕кр╕▓р╕в р╣Бр╕ер╕░р╕Зр╕▓р╕Щр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╕Щр╕▓р╕Щ р╣Ж

---

## ЁЯУВ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕гр╕░р╕Ър╕Ър╣Вр╕Фр╕вр╕вр╣Ир╕н
ESP32 р╕нр╣Ир╕▓р╕Щр╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤р╣Бр╕ер╕░р╣Ар╕зр╕ер╕▓ тЖТ р╕кр╣Ир╕Зр╕Ьр╣Ир╕▓р╕Щ ESP-NOW тЖТ р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╣Вр╕лр╕бр╕Ф Deep Sleep  
р╕Юр╕гр╣Йр╕нр╕бр╕бр╕╡ Web Setup р╣Гр╕лр╣Йр╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓р╣Бр╕ер╕░ MAC р╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б

---

## тЪЩя╕П р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ъ

### ЁЯУМ 1) р╕нр╣Ир╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╣Ар╕Лр╣Зр╕Щр╣Ар╕Лр╕нр╕гр╣Мр╕Ьр╣Ир╕▓р╕Щ I2C
- ЁЯМбя╕П HTU21D тЖТ р╕нр╣Ир╕▓р╕Щр╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤  
- тП░ DS3231 тЖТ р╕нр╣Ир╕▓р╕Щр╕зр╕▒р╕ЩтАУр╣Ар╕зр╕ер╕▓р╣Бр╕Ър╕Ъ RTC  
р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕░р╕Цр╕╣р╕Бр╣Ар╕Бр╣Зр╕Ър╣Гр╕Щр╕Хр╕▒р╕зр╣Бр╕Ыр╕гр╕кр╣Ир╕зр╕Щр╕Бр╕ер╕▓р╕Зр╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Хр╣Ир╕нр╣Др╕Ы

### ЁЯУМ 2) р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ DS3231 р╕Цр╕╣р╕Бр╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓р╕лр╕гр╕╖р╕нр╕вр╕▒р╕З
- ESP32 р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╣Ир╕▓р╣Гр╕Щ NVS  
- тЭМ р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Ар╕Др╕вр╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓ тЖТ р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╣Вр╕лр╕бр╕Ф Web Server р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤  
- тЬЕ р╕Цр╣Йр╕▓р╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕з тЖТ р╕Чр╕│р╕Зр╕▓р╕Щр╕Ыр╕Бр╕Хр╕┤ (р╕нр╣Ир╕▓р╕Щр╕Др╣Ир╕▓ + р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е)

### ЁЯУМ 3) р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Web Server
- ЁЯЖХ р╣Ар╕бр╕╖р╣Ир╕нр╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Ар╕Др╕вр╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓ ESP32 р╕Ир╕░:
  - р╣Ар╕Ыр╕┤р╕Ф WiFi AP р╕Кр╕╖р╣Ир╕н: `DS3231_Setup` р╕гр╕лр╕▒р╕к: `12345678`  
  - р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н WiFi р╣Бр╕ер╣Йр╕зр╣Ар╕Ыр╕┤р╕Ф Browser р╣Др╕Ыр╕Чр╕╡р╣И [http://192.168.4.1](http://192.168.4.1)  
  - р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓:
    - ЁЯЧУя╕П р╕зр╕▒р╕Щр╕Чр╕╡р╣И / р╣Ар╕зр╕ер╕▓ р╕Вр╕нр╕З DS3231  
    - ЁЯУб MAC Address р╕Вр╕нр╕Зр╕Хр╕▒р╕зр╕гр╕▒р╕Ъ ESP-NOW  
  - р╕Бр╕Ф Save тЖТ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Др╣Ир╕▓р╣Гр╕Щ NVS р╣Бр╕ер╕░р╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Чр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З

### ЁЯУМ 4) ESP-NOW Sender Mode
- ЁЯМбя╕П р╕нр╣Ир╕▓р╕Щр╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤р╕Ир╕▓р╕Б HTU21D  
- тП░ р╕нр╣Ир╕▓р╕Щр╣Ар╕зр╕ер╕▓ DS3231  
- ЁЯФд р╣Бр╕Ыр╕ер╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Ыр╣Зр╕Щр╕кр╕Хр╕гр╕┤р╕З JSON  
- ЁЯУб р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕Ыр╕вр╕▒р╕З ESP-NOW Receiver р╕Хр╕▓р╕б MAC р╕Чр╕╡р╣Ир╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Др╕зр╣Й  
- тЬЕ р╕гр╕н callback р╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕кр╣Ир╕Зр╕кр╕│р╣Ар╕гр╣Зр╕Ир╕лр╕гр╕╖р╕нр╣Др╕бр╣И

### ЁЯУМ 5) ЁЯТд р╕Бр╕▓р╕гр╣Гр╕Кр╣Й Deep Sleep р╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╕гр╕░р╕лр╕вр╕▒р╕Фр╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щ
- р╕лр╕ер╕▒р╕Зр╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╣Ар╕гр╣Зр╕И тЖТ ESP32 р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣И Deep Sleep 60 р╕Щр╕▓р╕Чр╕╡  
- р╕Цр╣Йр╕▓р╕Юр╕вр╕▓р╕вр╕▓р╕бр╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕гр╕Ъ 30 р╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕ер╣Йр╕зр╕вр╕▒р╕Зр╕кр╣Ир╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Й тЖТ р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣И Deep Sleep 60 р╕Щр╕▓р╕Чр╕╡р╣Ар╕Кр╣Ир╕Щр╕Бр╕▒р╕Щ  
- ЁЯФЛ р╕Кр╣Ир╕зр╕вр╕Ыр╕гр╕░р╕лр╕вр╕▒р╕Фр╣Бр╕Ър╕Хр╣Ар╕Хр╕нр╕гр╕╡р╣И р╣Ар╕лр╕бр╕▓р╕░р╕Бр╕▒р╕Ър╕Зр╕▓р╕Щр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╕Щр╕▓р╕Щ р╣Ж р╣Ар╕Кр╣Ир╕Щ:
  - ЁЯМЮ р╕зр╕▒р╕Фр╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤р╣Бр╕Ьр╕Зр╣Вр╕Лр╕ер╣Ир╕▓р╣Ар╕Лр╕ер╕ер╣М  
  - ЁЯМ╛ р╕Зр╕▓р╕Щр╣Ар╕Бр╕йр╕Хр╕г  
  - ЁЯПЮя╕П р╕гр╕░р╕Ър╕Ъ outdoor р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕бр╕╡р╣Др╕Яр╕Яр╣Йр╕▓ р╣Гр╕Кр╣Йр╣Бр╕Ър╕Хр╣Ар╕Хр╕нр╕гр╕╡р╣И

### ЁЯУМ 6) ЁЯТ╛ р╕Бр╕▓р╕гр╣Ар╕Бр╣Зр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕Др╕▒р╕Нр╕ер╕З NVS
- р╣Ар╕Бр╣Зр╕Ър╕кр╕Цр╕▓р╕Щр╕░р╕зр╣Ир╕▓р╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓р╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╕вр╕▒р╕З (`configured = 1`)  
- р╣Ар╕Бр╣Зр╕Ъ MAC р╕Вр╕нр╕Зр╕Хр╕▒р╕зр╕гр╕▒р╕Ъ ESP-NOW р╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕▓р╕вр╣Ар╕бр╕╖р╣Ир╕нр╕гр╕╡р╕Ър╕╣р╕Х

---

## ЁЯУЭ р╕кр╕гр╕╕р╕Ы
р╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣Мр╕Щр╕╡р╣Йр╕Кр╣Ир╕зр╕вр╣Гр╕лр╣Йр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕зр╕▒р╕Фр╕нр╕╕р╕Ур╕лр╕ар╕╣р╕бр╕┤р╣Бр╕Ър╕Ър╣Др╕гр╣Йр╕кр╕▓р╕в р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╣Ир╕▓р╕Щ ESP-NOW р╣Бр╕ер╕░р╕Ыр╕гр╕░р╕лр╕вр╕▒р╕Фр╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щр╕Фр╣Йр╕зр╕в Deep Sleep р╣Ар╕лр╕бр╕▓р╕░р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Зр╕▓р╕Щ IoT р╕лр╕гр╕╖р╕нр╕гр╕░р╕Ър╕Ър╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╕Бр╕ер╕▓р╕Зр╣Бр╕Ир╣Йр╕Зр╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╣Бр╕Ър╕Хр╣Ар╕Хр╕нр╕гр╕╡р╣И
